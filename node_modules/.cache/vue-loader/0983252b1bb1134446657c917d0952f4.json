{"remainingRequest":"/Users/jiwon/test/matching-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jiwon/test/matching-frontend/src/components/RequestList/_components/RequestListItemDetail.vue?vue&type=style&index=0&id=7ab7aab5&scoped=true&lang=css&","dependencies":[{"path":"/Users/jiwon/test/matching-frontend/src/components/RequestList/_components/RequestListItemDetail.vue","mtime":1660723455655},{"path":"/Users/jiwon/test/matching-frontend/node_modules/css-loader/dist/cjs.js","mtime":1660264748105},{"path":"/Users/jiwon/test/matching-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1660264748190},{"path":"/Users/jiwon/test/matching-frontend/node_modules/postcss-loader/src/index.js","mtime":1660264748183},{"path":"/Users/jiwon/test/matching-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1660264744188},{"path":"/Users/jiwon/test/matching-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1660264748190}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmRsIHsKICBoZWlnaHQ6IDE2MHB4OwogIHdpZHRoOiAxMDAlOwogIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZGNkZmUzOwogIG1hcmdpbjogMTBweCAwOwogIGFuaW1hdGlvbjogMTAwbXMgZ3JvdzsKfQoKLnBhaXIgewogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjsKICB3aWR0aDogMTAwJTsKICAvKiBoZWlnaHQ6IDE4cHg7ICovCiAgbWFyZ2luOiA1cHggMDsKfQoKZHQgewogIGNvbG9yOiAjODA4MDgwOwogIGZvbnQtc2l6ZTogMTRweDsKfQoKZGQgewogIGNvbG9yOiAjMDAwOwogIGZvbnQtc2l6ZTogMTRweDsKICBmb250LXdlaWdodDogNzAwOwp9CgpAa2V5ZnJhbWVzIGdyb3cgewogIDAlIHsKICAgIGhlaWdodDogMDsKICB9CgogIDEwMCUgewogICAgaGVpZ2h0OiAxODBweDsKICB9Cn0K"},{"version":3,"sources":["RequestListItemDetail.vue"],"names":[],"mappings":";AAyKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"RequestListItemDetail.vue","sourceRoot":"src/components/RequestList/_components","sourcesContent":["<template>\n  <dl style=\"border-top:1px solid gray; margin-bottom:10px;\">\n    <div\n      class=\"pair\"\n      v-for=\"(item, key, index) in items\"\n      :key=\"index\"\n    > \n    <div class=\"ml-5\"><span style=\"font-weight:bold\">{{title[index]}}</span> {{item}}</div>\n    </div>\n    <v-row class=\"pair\" style=\"display:flex; justify-content: center;\" v-if=\"this.contents.activeFlag=='0' && tab == false\">\n      <v-btn text rounded small dark style=\"background-color:#8452f7\" class=\"mr-5\" @click=\"beforeAccept()\">수락</v-btn>\n      <v-btn text rounded small dark style=\"background-color:#8452f7\" @click=\"beforeReject()\">거절</v-btn>\n    </v-row>\n\n\n    <v-row justify=\"center\">\n    <v-dialog\n      v-model=\"this.dialog\"\n      persistent\n      max-width=\"290\"\n    >\n      <v-card>\n        <v-card-title >\n          요청을 {{cardType}}하시겠습니까?\n        </v-card-title>\n        <v-card-text></v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            v-if=\"cardType=='수락'\"\n            color=\"#5f3dc4\"\n            text\n            @click=\"accept()\"\n          >\n            예\n          </v-btn>\n          <v-btn\n           v-if=\"cardType=='거절'\"\n            color=\"#5f3dc4\"\n            text\n            @click=\"reject()\"\n          >\n            예\n          </v-btn>\n          <v-btn\n            color=\"#5f3dc4\"\n            text\n            @click=\"dialog = false\"\n          >\n            아니오\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-row>\n  </dl>\n  \n</template>\n\n<script>\nimport dayjs from \"dayjs\";\nimport { useAppStore } from '@/store/userState'\nimport { loadUser } from '@/worker/user';\n\nexport default {\n  name: \"RequestListItemDetail\",\n  setup(){\n        const store = useAppStore()\n        return {store}\n    },\n  data(){\n    return{\n      dialog:false,\n      cardType:\"수락\",\n      items:[],\n      myData: [],\n      title:[this.getType(this.contents.activeFlag), \"나이\", \"직업\", \"주소\"],\n      match:[]\n    }\n  },\n  props: {\n    contents: Object,\n    tab: Boolean\n  },\n  methods:{\n    getType(flag){\n      if(flag==\"0\"){\n        return \"요청 시간\"\n      }else if(flag==\"1\"){\n        return \"매칭 시간\"\n      }else{\n        return \"종료 시간\"\n      }\n    },\n    makeDate(date){\n      return date.slice(0,4)+\"/\"+date.slice(4,6)+\"/\"+date.slice(6,8)+\" \"+date.slice(8,10)+\":\"+date.slice(10,12)+\":\"+date.slice(12,14)\n    },\n    beforeAccept(){\n      this.cardType=\"수락\"\n      this.dialog = true\n    },\n    accept(){\n      this.dialog = false\n      this.match = {activeFlag : \"1\", createdDate : dayjs().format(\"YYYYMMDDHHmmss\"), sender: this.contents.userId, receiver: this.store.user.userId  }\n      this.$axios.put(`http://matching.169.56.100.104.nip.io/match/matching/accept`,this.match)\n      .then(()=>{\n          this.getUser()\n          this.$router.go()\n      }).catch((err)=>{\n        console.log(err.response)\n      })\n    },\n    getUser(){\n      this.$axios.get(`http://matching.169.56.100.104.nip.io/match/user/${this.contents.userId}`)\n      .then((response)=>{\n        let senderUser = response.data\n        senderUser.matchCount = senderUser.matchCount+1\n        this.setCount(senderUser)\n      })\n\n      this.$axios.get(`http://matching.169.56.100.104.nip.io/match/user/${this.store.user.userId }`)\n      .then((response)=>{\n        let receiverUser = response.data\n        receiverUser.matchCount = receiverUser.matchCount+1\n        this.setCount(receiverUser)\n      })\n      \n    },\n    setCount(user){\n      this.$axios.put(`http://matching.169.56.100.104.nip.io/match/user`, user)\n      .then((response)=>{\n      })\n    },\n    beforeReject(){\n      this.cardType=\"거절\"\n      this.dialog = true\n    },\n    reject(){\n      this.dialog = false\n      this.match = {activeFlag : \"2\", createdDate : dayjs().format(\"YYYYMMDDHHmmss\"), sender: this.contents.userId, receiver: this.store.user.userId }\n      this.$axios.put(`http://matching.169.56.100.104.nip.io/match/matching/reject`,this.match)\n      .then(()=>{\n        this.$router.go()\n      }).catch((err)=>{\n        console.log(err.response)\n      })\n    }\n  },\n  mounted(){\n    this.$axios.get(`http://matching.169.56.100.104.nip.io/match/user/mydata/${this.contents.userId}`)\n    .then((response)=>{\n      this.myData = response.data\n      this.items = {\n        createdDate : this.makeDate(this.contents.createdDate),\n        age : this.myData.age + \"세\",\n        job : this.contents.job,\n        address : this.myData.address\n      }\n    }).catch((err)=>{\n      console.log(err.response)\n    })\n  },\n  created(){\n    loadUser(this.$userId)\n  }\n};\n</script>\n\n<style scoped>\ndl {\n  height: 160px;\n  width: 100%;\n  border-top: 1px solid #dcdfe3;\n  margin: 10px 0;\n  animation: 100ms grow;\n}\n\n.pair {\n  display: flex;\n  justify-content: space-between;\n  align-content: center;\n  width: 100%;\n  /* height: 18px; */\n  margin: 5px 0;\n}\n\ndt {\n  color: #808080;\n  font-size: 14px;\n}\n\ndd {\n  color: #000;\n  font-size: 14px;\n  font-weight: 700;\n}\n\n@keyframes grow {\n  0% {\n    height: 0;\n  }\n\n  100% {\n    height: 180px;\n  }\n}\n</style>\n"]}]}