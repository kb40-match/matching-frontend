{"remainingRequest":"/Users/jiwon/test/matching-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jiwon/test/matching-frontend/src/components/RequestList/_components/RequestListItemDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jiwon/test/matching-frontend/src/components/RequestList/_components/RequestListItemDetail.vue","mtime":1660723455655},{"path":"/Users/jiwon/test/matching-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1660264744188},{"path":"/Users/jiwon/test/matching-frontend/node_modules/babel-loader/lib/index.js","mtime":1652941041233},{"path":"/Users/jiwon/test/matching-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1660264744188},{"path":"/Users/jiwon/test/matching-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1660264748190}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBkYXlqcyBmcm9tICJkYXlqcyI7CmltcG9ydCB7IHVzZUFwcFN0b3JlIH0gZnJvbSAnQC9zdG9yZS91c2VyU3RhdGUnCmltcG9ydCB7IGxvYWRVc2VyIH0gZnJvbSAnQC93b3JrZXIvdXNlcic7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJlcXVlc3RMaXN0SXRlbURldGFpbCIsCiAgc2V0dXAoKXsKICAgICAgICBjb25zdCBzdG9yZSA9IHVzZUFwcFN0b3JlKCkKICAgICAgICByZXR1cm4ge3N0b3JlfQogICAgfSwKICBkYXRhKCl7CiAgICByZXR1cm57CiAgICAgIGRpYWxvZzpmYWxzZSwKICAgICAgY2FyZFR5cGU6IuyImOudvSIsCiAgICAgIGl0ZW1zOltdLAogICAgICBteURhdGE6IFtdLAogICAgICB0aXRsZTpbdGhpcy5nZXRUeXBlKHRoaXMuY29udGVudHMuYWN0aXZlRmxhZyksICLrgpjsnbQiLCAi7KeB7JeFIiwgIuyjvOyGjCJdLAogICAgICBtYXRjaDpbXQogICAgfQogIH0sCiAgcHJvcHM6IHsKICAgIGNvbnRlbnRzOiBPYmplY3QsCiAgICB0YWI6IEJvb2xlYW4KICB9LAogIG1ldGhvZHM6ewogICAgZ2V0VHlwZShmbGFnKXsKICAgICAgaWYoZmxhZz09IjAiKXsKICAgICAgICByZXR1cm4gIuyalOyyrSDsi5zqsIQiCiAgICAgIH1lbHNlIGlmKGZsYWc9PSIxIil7CiAgICAgICAgcmV0dXJuICLrp6Tsua0g7Iuc6rCEIgogICAgICB9ZWxzZXsKICAgICAgICByZXR1cm4gIuyiheujjCDsi5zqsIQiCiAgICAgIH0KICAgIH0sCiAgICBtYWtlRGF0ZShkYXRlKXsKICAgICAgcmV0dXJuIGRhdGUuc2xpY2UoMCw0KSsiLyIrZGF0ZS5zbGljZSg0LDYpKyIvIitkYXRlLnNsaWNlKDYsOCkrIiAiK2RhdGUuc2xpY2UoOCwxMCkrIjoiK2RhdGUuc2xpY2UoMTAsMTIpKyI6IitkYXRlLnNsaWNlKDEyLDE0KQogICAgfSwKICAgIGJlZm9yZUFjY2VwdCgpewogICAgICB0aGlzLmNhcmRUeXBlPSLsiJjrnb0iCiAgICAgIHRoaXMuZGlhbG9nID0gdHJ1ZQogICAgfSwKICAgIGFjY2VwdCgpewogICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlCiAgICAgIHRoaXMubWF0Y2ggPSB7YWN0aXZlRmxhZyA6ICIxIiwgY3JlYXRlZERhdGUgOiBkYXlqcygpLmZvcm1hdCgiWVlZWU1NRERISG1tc3MiKSwgc2VuZGVyOiB0aGlzLmNvbnRlbnRzLnVzZXJJZCwgcmVjZWl2ZXI6IHRoaXMuc3RvcmUudXNlci51c2VySWQgIH0KICAgICAgdGhpcy4kYXhpb3MucHV0KGBodHRwOi8vbWF0Y2hpbmcuMTY5LjU2LjEwMC4xMDQubmlwLmlvL21hdGNoL21hdGNoaW5nL2FjY2VwdGAsdGhpcy5tYXRjaCkKICAgICAgLnRoZW4oKCk9PnsKICAgICAgICAgIHRoaXMuZ2V0VXNlcigpCiAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKQogICAgICB9KS5jYXRjaCgoZXJyKT0+ewogICAgICAgIGNvbnNvbGUubG9nKGVyci5yZXNwb25zZSkKICAgICAgfSkKICAgIH0sCiAgICBnZXRVc2VyKCl7CiAgICAgIHRoaXMuJGF4aW9zLmdldChgaHR0cDovL21hdGNoaW5nLjE2OS41Ni4xMDAuMTA0Lm5pcC5pby9tYXRjaC91c2VyLyR7dGhpcy5jb250ZW50cy51c2VySWR9YCkKICAgICAgLnRoZW4oKHJlc3BvbnNlKT0+ewogICAgICAgIGxldCBzZW5kZXJVc2VyID0gcmVzcG9uc2UuZGF0YQogICAgICAgIHNlbmRlclVzZXIubWF0Y2hDb3VudCA9IHNlbmRlclVzZXIubWF0Y2hDb3VudCsxCiAgICAgICAgdGhpcy5zZXRDb3VudChzZW5kZXJVc2VyKQogICAgICB9KQoKICAgICAgdGhpcy4kYXhpb3MuZ2V0KGBodHRwOi8vbWF0Y2hpbmcuMTY5LjU2LjEwMC4xMDQubmlwLmlvL21hdGNoL3VzZXIvJHt0aGlzLnN0b3JlLnVzZXIudXNlcklkIH1gKQogICAgICAudGhlbigocmVzcG9uc2UpPT57CiAgICAgICAgbGV0IHJlY2VpdmVyVXNlciA9IHJlc3BvbnNlLmRhdGEKICAgICAgICByZWNlaXZlclVzZXIubWF0Y2hDb3VudCA9IHJlY2VpdmVyVXNlci5tYXRjaENvdW50KzEKICAgICAgICB0aGlzLnNldENvdW50KHJlY2VpdmVyVXNlcikKICAgICAgfSkKICAgICAgCiAgICB9LAogICAgc2V0Q291bnQodXNlcil7CiAgICAgIHRoaXMuJGF4aW9zLnB1dChgaHR0cDovL21hdGNoaW5nLjE2OS41Ni4xMDAuMTA0Lm5pcC5pby9tYXRjaC91c2VyYCwgdXNlcikKICAgICAgLnRoZW4oKHJlc3BvbnNlKT0+ewogICAgICB9KQogICAgfSwKICAgIGJlZm9yZVJlamVjdCgpewogICAgICB0aGlzLmNhcmRUeXBlPSLqsbDsoIgiCiAgICAgIHRoaXMuZGlhbG9nID0gdHJ1ZQogICAgfSwKICAgIHJlamVjdCgpewogICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlCiAgICAgIHRoaXMubWF0Y2ggPSB7YWN0aXZlRmxhZyA6ICIyIiwgY3JlYXRlZERhdGUgOiBkYXlqcygpLmZvcm1hdCgiWVlZWU1NRERISG1tc3MiKSwgc2VuZGVyOiB0aGlzLmNvbnRlbnRzLnVzZXJJZCwgcmVjZWl2ZXI6IHRoaXMuc3RvcmUudXNlci51c2VySWQgfQogICAgICB0aGlzLiRheGlvcy5wdXQoYGh0dHA6Ly9tYXRjaGluZy4xNjkuNTYuMTAwLjEwNC5uaXAuaW8vbWF0Y2gvbWF0Y2hpbmcvcmVqZWN0YCx0aGlzLm1hdGNoKQogICAgICAudGhlbigoKT0+ewogICAgICAgIHRoaXMuJHJvdXRlci5nbygpCiAgICAgIH0pLmNhdGNoKChlcnIpPT57CiAgICAgICAgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlKQogICAgICB9KQogICAgfQogIH0sCiAgbW91bnRlZCgpewogICAgdGhpcy4kYXhpb3MuZ2V0KGBodHRwOi8vbWF0Y2hpbmcuMTY5LjU2LjEwMC4xMDQubmlwLmlvL21hdGNoL3VzZXIvbXlkYXRhLyR7dGhpcy5jb250ZW50cy51c2VySWR9YCkKICAgIC50aGVuKChyZXNwb25zZSk9PnsKICAgICAgdGhpcy5teURhdGEgPSByZXNwb25zZS5kYXRhCiAgICAgIHRoaXMuaXRlbXMgPSB7CiAgICAgICAgY3JlYXRlZERhdGUgOiB0aGlzLm1ha2VEYXRlKHRoaXMuY29udGVudHMuY3JlYXRlZERhdGUpLAogICAgICAgIGFnZSA6IHRoaXMubXlEYXRhLmFnZSArICLshLgiLAogICAgICAgIGpvYiA6IHRoaXMuY29udGVudHMuam9iLAogICAgICAgIGFkZHJlc3MgOiB0aGlzLm15RGF0YS5hZGRyZXNzCiAgICAgIH0KICAgIH0pLmNhdGNoKChlcnIpPT57CiAgICAgIGNvbnNvbGUubG9nKGVyci5yZXNwb25zZSkKICAgIH0pCiAgfSwKICBjcmVhdGVkKCl7CiAgICBsb2FkVXNlcih0aGlzLiR1c2VySWQpCiAgfQp9Owo="},{"version":3,"sources":["RequestListItemDetail.vue"],"names":[],"mappings":";AA4DA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RequestListItemDetail.vue","sourceRoot":"src/components/RequestList/_components","sourcesContent":["<template>\n  <dl style=\"border-top:1px solid gray; margin-bottom:10px;\">\n    <div\n      class=\"pair\"\n      v-for=\"(item, key, index) in items\"\n      :key=\"index\"\n    > \n    <div class=\"ml-5\"><span style=\"font-weight:bold\">{{title[index]}}</span> {{item}}</div>\n    </div>\n    <v-row class=\"pair\" style=\"display:flex; justify-content: center;\" v-if=\"this.contents.activeFlag=='0' && tab == false\">\n      <v-btn text rounded small dark style=\"background-color:#8452f7\" class=\"mr-5\" @click=\"beforeAccept()\">수락</v-btn>\n      <v-btn text rounded small dark style=\"background-color:#8452f7\" @click=\"beforeReject()\">거절</v-btn>\n    </v-row>\n\n\n    <v-row justify=\"center\">\n    <v-dialog\n      v-model=\"this.dialog\"\n      persistent\n      max-width=\"290\"\n    >\n      <v-card>\n        <v-card-title >\n          요청을 {{cardType}}하시겠습니까?\n        </v-card-title>\n        <v-card-text></v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            v-if=\"cardType=='수락'\"\n            color=\"#5f3dc4\"\n            text\n            @click=\"accept()\"\n          >\n            예\n          </v-btn>\n          <v-btn\n           v-if=\"cardType=='거절'\"\n            color=\"#5f3dc4\"\n            text\n            @click=\"reject()\"\n          >\n            예\n          </v-btn>\n          <v-btn\n            color=\"#5f3dc4\"\n            text\n            @click=\"dialog = false\"\n          >\n            아니오\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-row>\n  </dl>\n  \n</template>\n\n<script>\nimport dayjs from \"dayjs\";\nimport { useAppStore } from '@/store/userState'\nimport { loadUser } from '@/worker/user';\n\nexport default {\n  name: \"RequestListItemDetail\",\n  setup(){\n        const store = useAppStore()\n        return {store}\n    },\n  data(){\n    return{\n      dialog:false,\n      cardType:\"수락\",\n      items:[],\n      myData: [],\n      title:[this.getType(this.contents.activeFlag), \"나이\", \"직업\", \"주소\"],\n      match:[]\n    }\n  },\n  props: {\n    contents: Object,\n    tab: Boolean\n  },\n  methods:{\n    getType(flag){\n      if(flag==\"0\"){\n        return \"요청 시간\"\n      }else if(flag==\"1\"){\n        return \"매칭 시간\"\n      }else{\n        return \"종료 시간\"\n      }\n    },\n    makeDate(date){\n      return date.slice(0,4)+\"/\"+date.slice(4,6)+\"/\"+date.slice(6,8)+\" \"+date.slice(8,10)+\":\"+date.slice(10,12)+\":\"+date.slice(12,14)\n    },\n    beforeAccept(){\n      this.cardType=\"수락\"\n      this.dialog = true\n    },\n    accept(){\n      this.dialog = false\n      this.match = {activeFlag : \"1\", createdDate : dayjs().format(\"YYYYMMDDHHmmss\"), sender: this.contents.userId, receiver: this.store.user.userId  }\n      this.$axios.put(`http://matching.169.56.100.104.nip.io/match/matching/accept`,this.match)\n      .then(()=>{\n          this.getUser()\n          this.$router.go()\n      }).catch((err)=>{\n        console.log(err.response)\n      })\n    },\n    getUser(){\n      this.$axios.get(`http://matching.169.56.100.104.nip.io/match/user/${this.contents.userId}`)\n      .then((response)=>{\n        let senderUser = response.data\n        senderUser.matchCount = senderUser.matchCount+1\n        this.setCount(senderUser)\n      })\n\n      this.$axios.get(`http://matching.169.56.100.104.nip.io/match/user/${this.store.user.userId }`)\n      .then((response)=>{\n        let receiverUser = response.data\n        receiverUser.matchCount = receiverUser.matchCount+1\n        this.setCount(receiverUser)\n      })\n      \n    },\n    setCount(user){\n      this.$axios.put(`http://matching.169.56.100.104.nip.io/match/user`, user)\n      .then((response)=>{\n      })\n    },\n    beforeReject(){\n      this.cardType=\"거절\"\n      this.dialog = true\n    },\n    reject(){\n      this.dialog = false\n      this.match = {activeFlag : \"2\", createdDate : dayjs().format(\"YYYYMMDDHHmmss\"), sender: this.contents.userId, receiver: this.store.user.userId }\n      this.$axios.put(`http://matching.169.56.100.104.nip.io/match/matching/reject`,this.match)\n      .then(()=>{\n        this.$router.go()\n      }).catch((err)=>{\n        console.log(err.response)\n      })\n    }\n  },\n  mounted(){\n    this.$axios.get(`http://matching.169.56.100.104.nip.io/match/user/mydata/${this.contents.userId}`)\n    .then((response)=>{\n      this.myData = response.data\n      this.items = {\n        createdDate : this.makeDate(this.contents.createdDate),\n        age : this.myData.age + \"세\",\n        job : this.contents.job,\n        address : this.myData.address\n      }\n    }).catch((err)=>{\n      console.log(err.response)\n    })\n  },\n  created(){\n    loadUser(this.$userId)\n  }\n};\n</script>\n\n<style scoped>\ndl {\n  height: 160px;\n  width: 100%;\n  border-top: 1px solid #dcdfe3;\n  margin: 10px 0;\n  animation: 100ms grow;\n}\n\n.pair {\n  display: flex;\n  justify-content: space-between;\n  align-content: center;\n  width: 100%;\n  /* height: 18px; */\n  margin: 5px 0;\n}\n\ndt {\n  color: #808080;\n  font-size: 14px;\n}\n\ndd {\n  color: #000;\n  font-size: 14px;\n  font-weight: 700;\n}\n\n@keyframes grow {\n  0% {\n    height: 0;\n  }\n\n  100% {\n    height: 180px;\n  }\n}\n</style>\n"]}]}